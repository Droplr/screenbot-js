/*! screenbot v0.0.6 - 2016-02-03 
 *  License: Apache-2.0 */

var Screenbot=function(){var a={source:null,token:null,service:"sdk",host:"https://app.screenbot.io"},b=function(b){return a.host+"/api/services/"+a.service+"/command?token="+a.token+"&text="+b},c=function(b){return a.host+"/api/services/"+a.service+"/response?channel_token="+b},d=function(a,b){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===c.readyState&&200===c.status){var a=JSON.parse(c.responseText);b(a.ok,a)}else 4===c.readyState&&b(!1,c.responseText)},c.open("GET",a,!0),c.send()};return function(e,f){var g=this;a.token=e,f&&f.service&&(a.service=f.service),f&&f.host&&(a.host=f.host),g.command=function(e,f){console.log("Source: "+a.source),d(b(e),function(b,d){return b?(a.source&&2!==a.source.readyState&&a.source.close(),a.source=new EventSource(c(d.token)),void(a.source.onmessage=function(b){a.source.close(),"0"===b.data&&f(!1),"0"!==b.data&&f(!0,b.data)})):f(!1,d.error)})},g.activate=function(a){g.command("",a)},g.shot=function(a){g.command("shot",a)},g.draw=function(a){g.command("draw",a)},g.cast=function(a){g.command("cast",a)},g.clip=function(a){g.command("clip",a)}}}();
//# sourceMappingURL=screenbot-v0.0.6.min.js.map